<!DOCTYPE html>
<html>
<head>
    <title>八闽租车系统</title>
    <meta charset="utf-8"/>
    <link rel="shortcut icon" href="images/favicon.png" type="image/x-icon" />
    <link rel="stylesheet" href="JS/jquery-ui.css">
   <link rel="stylesheet" href="JS/jquery.dataTables.css" type="text/css">
    <style>
        html,body{
            margin: 0;
            height: 100%;
        }
        .top1{
            background-color: #4a4a4a;
            color: #ffffff;
            margin: 0;
            width: 20%;
            height: 50px;
            line-height: 50px;
            text-align: center;
            border-right:1px solid #ffffff ;
            font-size: 30px;
            float: left;
        }
        .top2{
            width: 100%;
            background-color: #4a4a4a;
            height: 50px;
        }
        .lan1{
            width: 20%;
            background-color: #1f5377;
            color: #ffffff;
        }
        .top3{
            color: #ffffff;
            height: 65px;
            background-color: #1f5377;
            width: 79.95%;
            float: right;
            border-left:1px solid #ffffff;

        }
        .mainpage{
	    font-size:20px;
            width: 79.9%;
            float: right;
            clear: left;
        }
        .icon{

            text-align: center;
            color: #ffffff;
            padding-bottom: 10px;
            padding-top: 10px ;
        }
        #icon{
            height: 85px;
            width: 85px;
        }
        .op p{
            margin: 10px 0;
            padding-top: 0;
            height: 48px;
            line-height: 48px;
        }
        .op p a{
            clear: left;
            text-decoration: none;
            color: #ffffff;
            font-size: 25px;
            margin: 10px 10px;
        }
        .op p a img{
            float: left;
        }
        #biao{
            width: 100%;
        }
        .check{
            float: left;
            height: 48px;
            margin-right: 25px;
            visibility: hidden;
        }
        .show{
            visibility: visible;
        }
        .c{
            background-color: #24638e;
        }
        .top3 div{
            height:65px;
            margin: 0 30px;
            line-height: 65px;
            font-size: 25px;
        }
        .top3 p{
            margin: 0;
        }
        .top3 p img{
            margin: 10px;
            float: left;
        }
	.p1{
	    margin-left:20px;
	    font-weight:bold;
	}
	#table1{
	    font-size:15px;
	    width:70%;
	    border-collapse: collapse;/* 边框合并属性  */
	    margin-left:20px;
	    margin-bottom:20px;
	}
	#table1 td{
	   /* border:1px solid #000; */
	    width:150px;
	    text-align:center;
	}
	.table2{
	    width:60%;
	    margin-left:20px;
	    margin-bottom:20px;
	}
	.table2 td{
	    font-weight:bold;
	    text-align:left;	
	    width:230px;
	    margin:20px;
	}
	.table2 input{
	    width:35%;
	    height:23px;
	    border-radius:3px;border:1px solid #000;
	    margin:10px; 
	}
	.mainpage p{
	    margin-left:20px;
	}
	.mainpage   input{
	    height:23px;
	    border-radius:3px;border:1px solid #000;
	    margin:10px; 
	}
	.mainpage input[type=button]{
	    width:140px;
	    height:23px;
	    vertical-align:bottom;
	    font-size:17px;
	}
	.table3{
	    margin-left:20px;
	}
	.childwindow{
	    margin-left:20px;
	    display:none;
	    background-color:#f0f0f0;
	    position:absolute;
	    z-index:5;
	}
	.tableChild{

       overflow:hidden;
       word-break: keep-all;
       white-space:nowrap;

    }
    .tableChild th{
        width:120px;
    }
	.thead{
	    background-color:#c0c0c0;
        overflow:hidden;
	}
    select{
            border-radius:3px;border:1px solid #000;
            width: 100px;
            height: 30px;
    }
    .light{
            color: red;
    }
    .oo{
            background-color: #cccccc;
    }
        input[type=radio]{
            margin:0;
            width:15%;
            height:13px;
        }
    </style>
   <!-- <link rel="stylesheet" href="assets/css/style.css">  -->
  <!-- <script src="JS/jquery-1.11.3.js"></script> -->
    <script src="JS/jquery-1.12.0.js"></script>
    <script src="JS/jquery-ui.js"></script>
    <script src="JS/jquery.dataTables.js"></script>
   <script src="JS/jquery/jquery-ui-timepicker-addon.js"></script>
    <script src="JS/jquery/jquery-ui-timepicker-zh-CN.js"></script>
    <script type="text/javascript">
	window.onload = function flush() {

        /*获取租车方案数据*/
        $("#planTable").dataTable({
            "searching":false,
            "serverSide": true,
            "processing": true,
            "ajax": "/bmpw/zc/plan/loadCanUsePlan",
            "bSort": false,
            "bLengthChange": false,
            "bInfo": false,
            "oLanguage": {
                "sLengthMenu": "每页显示 _MENU_ 条记录",
                "sZeroRecords": "抱歉， 没有找到",
                "sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",
                "sInfoEmpty": "没有数据",
                "sInfoFiltered": "(从 _MAX_ 条数据中检索)",
                "oPaginate": {
                    "sFirst": "首页",
                    "sPrevious": "前一页",
                    "sNext": "后一页",
                    "sLast": "尾页"
                }
            },
            "columns": [
                { "data": "name" },
                { "data": "price" },
                { "data": "unitMileage"},
                { "data": "outMileage"},
                { "data": "outTime"}
            ]
        });
        $("#child1").on("click","td",function(){
            $("tr.light").removeClass("light");
            $($(this).parent("tr")).addClass("light");
            $("td.oo").removeClass("oo");
            $(this).addClass("oo");
            $(this).siblings().addClass("oo");
            var data = $("#planTable").DataTable().row($(this).parents("tr")).data();
            $(":input[name=planName]").val(data.name);
            $(":input[name=planId]").val(data.id);
            if(data.jijia == 0){
                $(":input[type=radio][value=\"0\"]").attr("checked",true);
            }
            if(data.jijia ==1){
                $(":input[type=radio][value=\"1\"]").attr("checked",true);
            }
            if(data.jijia == 2){
                $(":input[type=radio][value=\"2\"]").attr("checked",true);
            }
            $(":input[type=radio][value='"+ data.jijia +"']").attr("checked",true);
            $(":input[name=unitMileage]").val(data.unitMileage);
            $(":input[name=outTime]").val(data.outTime);
            $(":input[name=price]").val(data.price);
            $(":input[name=outMileage]").val(data.outMileage);
        });
        /*上面的代码是为了捆绑事件--方案子窗口*/

        $("#table1").dataTable({
            "serverSide":true,
            "processing": true,
            "ajax":"/bmpw/zc/car/loadCanUseCars",
            "scrollY": "200px",
            "scrollCollapse": "true",
            "bFilter":false,
            "bSort":false,
            "bLengthChange":false,
            "bInfo":false,
            "oLanguage": {
                "sLengthMenu": "每页显示 _MENU_ 条记录",
                "sZeroRecords": "抱歉， 没有找到",
                "sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",
                "sInfoEmpty": "没有数据",
                "sInfoFiltered": "(从 _MAX_ 条数据中检索)",
                "oPaginate": {
                    "sFirst": "首页",
                    "sPrevious": "前一页",
                    "sNext": "后一页",
                    "sLast": "尾页"
                },
                "sSearch":"搜索车牌号"
            },
            "columns":[
                { "data": "licensePlate" },
                { "data": "type" },
                { "data": "model"},
                { "data": "deposit"},
                { "data":"maintenanceMileage"},
                { "data": "mileage"}
            ]
        });
        $("#carTableDiv").on("click","td",function(){
            $("tr.light").removeClass("light");
            $($(this).parent("tr")).addClass("light");
            $("td.oo").removeClass("oo");
            $(this).addClass("oo");
            $(this).siblings().addClass("oo");
            var data = $("#table1").DataTable().row($(this).parents("tr")).data();
            $(":input[name=carId]").val(data.carId);
        });
        /*上面的代码是为了捆绑事件*/

        /*下面开始获取客户信息*/
        $("#countTable").dataTable({
            "bAutoWidth":false,
            "serverSide":true,
            "processing": true,
            "ajax":"/bmpw/zc/account/loadaccounts",
            "scrollY": "200px",
            "scrollCollapse": "true",
            "bFilter":false,
            "bSort":false,
            "bLengthChange":false,
            "bInfo":false,
            "oLanguage": {
                "sLengthMenu": "每页显示 _MENU_ 条记录",
                "sZeroRecords": "抱歉， 没有找到",
                "sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",
                "sInfoEmpty": "没有数据",
                "sInfoFiltered": "(从 _MAX_ 条数据中检索)",
                "oPaginate": {
                    "sFirst": "首页",
                    "sPrevious": "前一页",
                    "sNext": "后一页",
                    "sLast": "尾页"
                },
                "sSearch":"搜索车牌号"
            },
            "columns":[
                { "data": "name" },
                { "data": "idCard"},
                { "data": "bankCard"},
                { "data": "phone"},
               { "data": "address"}
            ]
        });
        /*给客户控件赋值*/
        $("#child2").on("click","td",function(){
            $("tr.light").removeClass("light");
            $($(this).parent("tr")).addClass("light");
            $("td.oo").removeClass("oo");
            $(this).addClass("oo");
            $(this).siblings().addClass("oo");
            var data = $("#countTable").DataTable().row($(this).parents("tr")).data();
            $(":input[name=idCard]").val(data.idCard);
            $(":input[name=bankCard]").val(data.bankCard);
            $(":input[name=name]").val(data.name);
            $(":input[name=phone]").val(data.phone);
            $(":input[name=address]").val(data.address);
            $(":input[name=accountId]").val(data.id);
        });

        /*下面开始获取担保客户信息*/
        $("#guarantorTable").dataTable({
            "bAutoWidth":false,
            "serverSide":true,
            "processing": true,
            "ajax":"/bmpw/zc/account/loadaccounts",
            "scrollY": "200px",
            "scrollCollapse": "true",
            "bFilter":false,
            "bSort":false,
            "bLengthChange":false,
            "bInfo":false,
            "oLanguage": {
                "sLengthMenu": "每页显示 _MENU_ 条记录",
                "sZeroRecords": "抱歉， 没有找到",
                "sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",
                "sInfoEmpty": "没有数据",
                "sInfoFiltered": "(从 _MAX_ 条数据中检索)",
                "oPaginate": {
                    "sFirst": "首页",
                    "sPrevious": "前一页",
                    "sNext": "后一页",
                    "sLast": "尾页"
                },
                "sSearch":"搜索车牌号"
            },
            "columns":[
                { "data": "name" },
                { "data": "idCard"},
                { "data": "bankCard"},
                { "data": "phone"},
                { "data": "address"}
            ]
        });
        /*给担保客户控件赋值*/
        $("#child3").on("click","td",function(){
            $("tr.light").removeClass("light");
            $($(this).parent("tr")).addClass("light");
            $("td.oo").removeClass("oo");
            $(this).addClass("oo");
            $(this).siblings().addClass("oo");
            var data = $("#guarantorTable").DataTable().row($(this).parents("tr")).data();
            $(":input[name=guarantorIdCard]").val(data.idCard);
            $(":input[name=bankCard]").val(data.bankCard);
            $(":input[name=guarantorName]").val(data.name);
            $(":input[name=guarantorPhone]").val(data.phone);
            $(":input[name=guarantorAddress]").val(data.address);
            $(":input[name=guarantorId]").val(data.id);
        });

        var obj1 = document.getElementById("lan");
        var obj2 = document.getElementById("main");
        obj1.style.height = obj2.offsetHeight + 280+'px';
        /*上面的代码是为了对齐菜单栏*/

        $( "#datepicker1" ).datetimepicker({
            regional:"zh-CN",
            dateFormat:"yy-mm-dd",
            timeFormat: "hh:mm:ss"
        });
        $( "#datepicker2" ).datetimepicker({
            regional:"zh-CN",
            dateFormat:"yy-mm-dd",
            timeFormat: "hh:mm:ss"
        });

	 };
	function choosePlan(){
	 $("#child1").toggle();
	 var x = $("#choose").offset().left;
	 var y = $("#choose").offset().top;
	 $("#child1").css({'left':x-20+'px','top':y+25+'px'});
	}
    function choose1(){
        $("#child2").toggle();
        var x = $("#chooseClient1").offset().left;
        var y = $("#chooseClient1").offset().top;
        $("#child2").css({'left':x-20+'px','top':y-300+'px'});
    }
    function choose2(){
        $("#child3").toggle();
        var x = $("#chooseClient2").offset().left;
        var y = $("#chooseClient2").offset().top;
        $("#child3").css({'left':x-20+'px','top':y-300+'px'});
    }
    function sendOrder(i){
        if(i==0)
        $("#zucheForm").submit();
    }
    </script>
</head>
<body>
<div class="top1">租车行</div>
<div class="top2"></div>
<div class="top3"><div><p><img src="images/zuche.png">租车</p></div></div>
<div id="main" class="mainpage">
	<p class="p1">车辆出租 | 出租信息修改</p>
    <form action="" method="post" id="zucheForm">
        <input type="hidden" name="carId"/>
	<p class="p1">可租空闲车辆</p>
    <div id="carTableDiv">
	<table id="table1">
	  <thead>
             <th>车辆</th>
             <th>车型</th>
             <th>品牌</th>
             <th>押金标准</th>
	         <th>保养里程</th>
             <th>当前里程</th>
      </thead>
	</table>
    </div>
	<table class="table2">
	<tr>
	 	<td>出租时间</td><td>计划归还时间</td><td>借出时里程数</td>
	</tr>
	<tr>
	 	<td><input type="text" id="datepicker1" style="width:150px;">
        </td>
        <td><input type="text" id="datepicker2" style="width:150px;">
        </td>
        <td><input/>
        </td>
	</tr>
	</table>
	<p class="p1">出租计费</p>
	<div>
	<p>选择预定租借计费方案<input name="planName"/>
	<input id="choose" type="button" value="选择方案" onclick="choosePlan();"/></p>
        <!-- 隐藏的方案ID -->
        <input type="hidden" name="planId"/>
	 	<div id="child1" class="childwindow">
		   <table id="planTable" class="tableChild">
	  		    <thead class="thead">
                    <th>方案名称</th>
                    <th>单价</th>
		  	        <th>单位里程数</th>
                    <th>超里程价格</th>
	  	  	        <th>超时小时价</th>
                </thead>
	  	   </table>
		</div>
	<table class="table3">
	 	<tr>
	<td>计价方式</td><td><input type="radio" name="jijia" value="0"/>天
            <input type="radio" name="jijia" value="1"/>小时
            <input type="radio" name="jijia" value="2"/>月</td>
	<td>单位里程（公里）</td><td><input name="unitMileage"/></td>
	<td>超时小时价</td><td><input name="outTime"/></td>
	<td>收押金</td><td><input name="shouyajin"/></td>
        </tr>
		<tr>
	<td>单位租金（元）</td><td><input name="price"/></td>
	<td>超限程基价（每公里）</td><td><input name="outMileage"/></td>
	<td>预收租费</td><td><input name="advancePayment"/></td>
		</tr>
	</table>
	<p>备注<input style="margin-left:20px;width:50%" name="note"/></p>
	</div>
	<p class="p1">客户信息</p>
	<table class="table3">
	<tr>
	    <td>客户证件号</td><td><input name="idCard"/></td>
        <td>银行卡号</td><td><input name="bankCard"/></td>
	    <td><input id="chooseClient1" type="button" value="查询客户" onclick="choose1()"/>
	        <input type="button" value="新客户档案"/></td>
	</tr>
	<tr>
	    <td>客户名称</td><td><input name="name"/></td>
        <td>电话号码</td><td><input name="phone"/></td>
	    <td colspan="2">住址<input name="address"/></td>
	</tr>
	</table>
        <input type="hidden" name="accountId"/>
    <div id="child2" class="childwindow">
        <table id="countTable" class="tableChild">
            <thead class="thead">
                <th>客户名称</th>
                <th>证件号</th>
                <th>银行卡号</th>
                <th>电话号码</th>
                <th>地址</th>
            </thead>
        </table>
    </div>
	<p class="p1">担保人信息</p>
	<table class="table3">
	<tr>
	    <td>担保客户证件号</td><td><input name="guarantorIdCard"/></td>
        <td>担保客户名称</td><td><input name="guarantorName"/></td>
	    <td><input id="chooseClient2" type="button" value="查询担保客户" onclick="choose2()"/>
	        <input type="button" value="新担保客户档案"/></td>
	</tr>
	<tr>
	    <td>担保客户电话号码</td><td><input name="guarantorPhone"/></td>
        <td>担保客户地址</td><td><input name="guarantorAddress"/></td>
	</tr>
	</table>
        <input type="hidden" name="guarantorId"/>
    <div id="child3" class="childwindow">
        <table id="guarantorTable" class="tableChild">
            <thead class="thead">
                <th>客户名称</th>
                <th>证件号</th>
                <th>银行卡号</th>
                <th>电话号码</th>
                <th>地址</th>
            </thead>
        </table>
    </div>
	<table>
		<tr>
		<td><input type="button" value="租出" onclick="sendOrder(0);"/></td>
		<td><input type="button" value="租出并打印租单" onclick="sendOrder(1);"/></td>
		<td><input type="button" value="退出" onclick="exitPage();"/></td>
		</tr>
	</table>
    </form>
</div>
<div id="lan" class="lan1">
    <div class="icon">
        <div>
            <div><img id="icon" src="icon/touxiang.png"/></div>
            <div><img src="images/lvdian.png"/><label>Admin</label></div>
            <div><img id="biao" src="images/baisetiao.png"/> </div>
        </div>
    </div>
    <div class="op">
        <p><img class="check" src="images/check.png"><a href="/bmpw/toZC_Cheliangxinxi"><img src="images/chelianxinxi.png">车辆信息</a></p>
        <p><img class="check" src="images/check.png"><a href="/bmpw/toZC_AddCar"><img src="images/chelianxinzeng.png"/>车辆新增</a></p>
        <p><img class="check" src="images/check.png"><a href="/bmpw/toZC_Plans"><img src="images/zulenfangan.png">租赁方案</a></p>
        <p class="c"><img class="check show" src="images/check.png"><a href="#"><img src="images/zuche.png">租车</a></p>
        <p><img class="check" src="images/check.png"><a href="/bmpw/toZC_ReturnCar"><img src="images/huanche.png"/>还车</a></p>
        <p><img class="check" src="images/check.png"><a href="#"><img src="images/jiesuan.png"/>结算</a></p>
        <p><img class="check" src="images/check.png"><a href="/bmpw/toZC_Account"><img src="images/kehu.png"/>客户</a></p>
        <p><img class="check" src="images/check.png"><a href="/bmpw/toZC_Appointment"><img src="images/yudingdengji.png"/>预定登记</a></p>
    </div>
</div>
</body>
</html>