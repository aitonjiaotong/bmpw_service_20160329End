<!DOCTYPE html>
<html>
<head>
    <title>八闽租车系统</title>
    <meta charset="utf-8"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png" type="image/x-icon" />
    <link rel="stylesheet" href="JS/jquery.dataTables.css" type="text/css"/>
   <!-- <link href="JS/liger/ligerUI/skins/Aqua/css/ligerui-all.css" rel="stylesheet" type="text/css">
    <link href="JS/liger/ligerUI/skins/ligerui-icons.css" rel="stylesheet" type="text/css">  -->
    <style>
        html,body{
            margin: 0;
            height: 100%;
        }
        .top1{
            background-color: #4a4a4a;
            color: #ffffff;
            margin: 0;
            width: 20%;
            height: 50px;
            line-height: 50px;
            text-align: center;
            border-right:1px solid #ffffff ;
            font-size: 30px;
            float: left;
        }
        .top2{
            width: 100%;
            background-color: #4a4a4a;
            height: 50px;
        }
        .lan1{
            width: 20%;
            height: 100%;
            background-color: #1f5377;
            color: #ffffff;
        }
        .top3{
            color: #ffffff;
            height: 65px;
            background-color: #1f5377;
            width: 79.95%;
            float: right;
            border-left:1px solid #ffffff;

        }
        .mainpage{
            width: 79.9%;
            float: right;
            clear: left;
        }
        .icon{

            text-align: center;
            color: #ffffff;
            padding-bottom: 10px;
            padding-top: 10px ;
        }
        #icon{
            height: 85px;
            width: 85px;
        }
        .op p{
            margin: 10px 0;
            padding-top: 0;
            height: 48px;
            line-height: 48px;
        }
        .op p a{
            clear: left;
            text-decoration: none;
            color: #ffffff;
            font-size: 25px;
            margin: 10px 10px;
        }
        .op p a img{
            float: left;
        }
        #biao{
            width: 100%;
        }
        .check{
            float: left;
            height: 48px;
            margin-right: 25px;
            visibility: hidden;
        }
        .show{
            visibility: visible;
        }
        .c{
            background-color: #24638e;
        }
        .top3 div{
            height:65px;
            margin: 0 30px;
            line-height: 65px;
            font-size: 25px;
        }
        .top3 p{
            margin: 0;
        }
        .top3 p img{
            margin: 10px;
            float: left;
        }
        #btns{
            text-align: center;
        }
        #btns button{
            width:100px;
            height:25px;
            border-radius:3px;
            border:1px solid #000;
            margin: 10px;
        }
        #child{
            left:30%;
            display: none;
            background-color:#fff;
            width : 700px;
            height : 580px;
            margin-left : 500;
            border : 1px solid #000;
            z-index : 999;
            position: absolute;
            font-size: 20px;
        }
        #mengban {
            width : 100%;
            height: 100%;
            position : absolute;
            z-index : 998;
            background-color:#999;
            filter:alpha(Opacity=80);
            -moz-opacity:0.5;
            opacity: 0.5;
        }
        #child input[type=text]{
            width:200px;
            height:30px;
            border-radius:3px;
            border:1px solid #000;
            margin: 10px;
        }
        #child input[type=button]{
            border-radius:3px;
            border:1px solid #000;
            margin: 10px;
            width:150px;
            height: 30px;
        }
        #child input[type=radio]{
            margin: 10px;
            height: 20px;
        }
        #child .headDiv{
            padding-left:20px ;
            background-color: #1f5377;
            height: 50px;
            line-height: 50px;
            color:#fff;
        }
        .headDiv p{
            padding:0px;
            margin:0px;
        }
        .childTable{
            margin-left:10px;
            width:100%;
            text-align:center;
        }
        fieldset{
            margin: 20px;
            border-radius:3px;border:1px solid #aaa;
        }
        legend{
            text-align:center;
        }
        #plans{
            text-align: center;
            border:1px solid #000000;
        }
        input[type=text]{
            padding-left:10px;
        }
    </style>
</head>
<body>
<div class="top1">租车行</div>
<div class="top2"></div>
<div class="top3"><div><p><img src="images/zulenfangan.png">租赁方案</p></div></div>
<div class="mainpage">
   <div id="loadplans">
       <table id="plans">
           <thead>
            <tr>
               <th>方案名称</th>
               <th>价格（单价）</th>
               <th>单位时间限里程</th>
               <th>超程基价（元/公里）</th>
               <th>超时小时价（元/小时）</th>
               <th>方案状态</th>
                <th></th>
            </tr>
           </thead>
       </table>
   </div>
    <div id="child">
        <div class="headDiv"><p>新增租赁方案</p></div>
        <div>
            <form id="addPlan" action="/bmpw/zc/plan/addPlan" method="post">
                <table class="childTable">
                    <tr>
                        <td>方案名称</td><td><input style="width:300px;" type="text" name="name"/></td>
                    </tr>
                </table>
                <fieldset>
                    <legend>计价单位</legend>
                    <table class="childTable">
                        <tr>
                            <td><input type="radio" name="jijia" checked="checked" value="0"/><label>按天</label></td>
                            <!--    <td><input type="radio" name="jijia" value="2"/>包月</td>
                                    <td><input type="radio" name="jijia" value="1"/>计时</td>     -->
                        </tr>
                    </table>
                </fieldset>
                <table class="childTable" style="margin-bottom: 50px;">
                    <tr><td>价格（元）</td><td><input type="text" name="price"/></td></tr>
                    <tr><td>单位时间内限里程</td><td><input type="text" name="unitMileage"/></td></tr>
                    <tr><td>超程基价</td><td><input type="text" name="outMileage"/></td></tr>
                    <tr><td>超时小时价（元/小时）</td><td><input type="text" name="outTime"/></td></tr>
                </table>
                <table class="childTable">
                    <tr style="padding: 20px;margin: 20px;">
                        <td><input style="margin-left:120px;" type="button" value="确定" onclick="hideDiv(0)"/></td>
                        <td><input style="margin-right:120px;" type="button"  value="取消" onclick="hideDiv(1)"></td>
                    </tr>
                </table>
            </form>
        </div>
    </div>
    <div id="btns">
        <button onclick="showChild()">新增</button>
        <button>退出</button>
    </div>

</div>
<div class="lan1">
    <div class="icon">
        <div>
            <div><img id="icon" src="icon/touxiang.png"/></div>
            <div><img src="images/lvdian.png"/><label>Admin</label></div>
            <div><img id="biao" src="images/baisetiao.png"/> </div>
        </div>
    </div>
    <div class="op">
        <p><img class="check" src="images/check.png"><a href="/bmpw/toZC_Cheliangxinxi"><img src="images/chelianxinxi.png">车辆信息</a></p>
        <p><img class="check" src="images/check.png"><a href="/bmpw/toZC_AddCar"><img src="images/chelianxinzeng.png"/>车辆新增</a></p>
        <p class="c"><img class="check show" src="images/check.png"><a href="#"><img src="images/zulenfangan.png">租赁方案</a></p>
        <p><img class="check" src="images/check.png"><a href="/bmpw/toZC_Zuche"><img src="images/zuche.png">租车</a></p>
        <p><img class="check" src="images/check.png"><a href="/bmpw/toZC_ReturnCar"><img src="images/huanche.png"/>还车</a></p>
        <p><img class="check" src="images/check.png"><a href="/bmpw/toZC_Settlement"><img src="images/jiesuan.png"/>结算</a></p>
        <p><img class="check" src="images/check.png"><a href="/bmpw/toZC_Account"><img src="images/kehu.png"/>客户</a></p>
        <p><img class="check" src="images/check.png"><a href="/bmpw/toZC_Appointment"><img src="images/yudingdengji.png"/>预定登记</a></p>
    </div>
</div>
<div id="mengban" style="display:none"><!--这是蒙板--></div>
</div>
<script src="JS/jquery-1.12.0.js"></script>
<script src="JS/jquery.dataTables.js"></script>
<script>
    $(function(){
        $("#plans").dataTable({
            "serverSide":true,
            "processing": true,
            "ajax":"/bmpw/zc/plan/loadplan",
            "bSort":false,
            "bLengthChange":false,
            "bInfo":false,
            "oLanguage": {
                "sLengthMenu": "每页显示 _MENU_ 条记录",
                "sZeroRecords": "抱歉， 没有找到",
                "sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",
                "sInfoEmpty": "没有数据",
                "sInfoFiltered": "(从 _MAX_ 条数据中检索)",
                "oPaginate": {
                    "sFirst": "首页",
                    "sPrevious": "前一页",
                    "sNext": "后一页",
                    "sLast": "尾页"
                },
                "sSearch": "根据方案名查询"
            },
            "columns":[
                { "data": "name" },
                { "data": "price" },
                { "data": "unitMileage"},
                { "data": "outMileage"},
                { "data": "outTime"},
                { "data": "flag"},
                { "data": ""}
            ],
                "createdRow": function ( row, data, dataindex ) {
            if(data.flag==0){
                $('td', row).eq(5).text("方案使用中");
            }
            if(data.flag==1){
                $('td', row).eq(5).text("方案已删除");
                $('td', row).eq(6).text("");
            }
        },
            "columnDefs":[{
                "targets":-1,
                "data":null,
                "sDefaultContent":"<button style='border-radius: 3px;border:1px solid #000000'>删除</button>"
            }]
        });
        $("#loadplans").on("click","button",function(){
            var data = $("#plans").DataTable().row($(this).parents("tr")).data();
            var id=data.id;
            $.ajax({
                url:"/bmpw/zc/plan/delplan",
                dataType:"json",
                type:"post",
                data:{"planId":id},
                success:function(data){
                    if(data){
                        alert("删除成功！");
                        window.location.reload();
                    }else{
                        alert("删除失败");
                    }
                },
                error:function(){
                    alert("修改失败");
                }
            });
        });
    });
    function showChild() {
        var x = $("body").offset().left;
        var y = $("body").offset().top;
        $("#mengban").css({'left':x+'px','top':y+'px'});
        $("#mengban").show();
        $("#child").show();
    }
    function hideDiv(i) {
        if(i==1){
            $('#addPlan').get(0).reset();
            $("#mengban").hide();
            $("#child").hide();
            return;
        }else if(i==0){
            $("#mengban").hide();
            $("#child").hide();
            $("#addPlan").submit();
        }
    }
    </script>
</body>
</html>